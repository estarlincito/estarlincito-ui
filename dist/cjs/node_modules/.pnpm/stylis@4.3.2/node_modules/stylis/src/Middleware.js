"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const s=require("./Enum.js"),p=require("./Utility.js"),i=require("./Tokenizer.js"),n=require("./Serializer.js"),w=require("./Prefixer.js");function y(r){var t=p.sizeof(r);return function(u,c,o,e){for(var f="",a=0;a<t;a++)f+=r[a](u,c,o,e)||"";return f}}function d(r){return function(t){t.root||(t=t.return)&&r(t)}}function g(r,t,u,c){if(r.length>-1&&!r.return)switch(r.type){case s.DECLARATION:r.return=w.prefix(r.value,r.length,u);return;case s.KEYFRAMES:return n.serialize([i.copy(r,{value:p.replace(r.value,"@","@"+s.WEBKIT)})],c);case s.RULESET:if(r.length)return p.combine(u=r.props,function(o){switch(p.match(o,c=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":i.lift(i.copy(r,{props:[p.replace(o,/:(read-\w+)/,":"+s.MOZ+"$1")]})),i.lift(i.copy(r,{props:[o]})),p.assign(r,{props:p.filter(u,c)});break;case"::placeholder":i.lift(i.copy(r,{props:[p.replace(o,/:(plac\w+)/,":"+s.WEBKIT+"input-$1")]})),i.lift(i.copy(r,{props:[p.replace(o,/:(plac\w+)/,":"+s.MOZ+"$1")]})),i.lift(i.copy(r,{props:[p.replace(o,/:(plac\w+)/,s.MS+"input-$1")]})),i.lift(i.copy(r,{props:[o]})),p.assign(r,{props:p.filter(u,c)});break}return""})}}exports.middleware=y;exports.prefixer=g;exports.rulesheet=d;
