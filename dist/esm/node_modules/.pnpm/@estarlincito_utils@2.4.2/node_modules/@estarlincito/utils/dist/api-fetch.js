import { handleError as o } from "./handle-error.js";
const a = (t) => {
  try {
    const n = JSON.parse(t);
    return new URLSearchParams(n).toString();
  } catch {
    o("Invalid JSON string in body");
    return;
  }
}, p = async ({ url: t, body: n, headers: e, method: c }) => {
  const i = t instanceof URL ? t.toString() : t, s = {
    method: c,
    body: n ? a(n) : void 0,
    headers: e || {
      Accept: "*/*",
      "User-Agent": "Estarlincito (https://www.estarlincito.com)",
      "Content-Type": "application/x-www-form-urlencoded"
    }
  }, r = await fetch(i, s);
  return r.ok || o(`HTTP error! status: ${r.status}`), r;
};
export {
  p as apiFetch
};
